# JWT 토큰
> 웹 표준으로 두 객체의 JSON 객체를 사용해서 정보를 안정성 있게 전달하기 위해 사용한다.

## JSON Web Token
> 사용할 정보를 자체적으로 가지고 있고,(우리가 노출되도 되는 정보)
> JWT로 발급한 토큰은 기본정보(유저 닉네임 혹은 프로필 경로)
> 토큰이 유효한지 변조가 되지 않았는지 검증을 하기 위해서 서명이 포함되어 있다.

## 로그인
> 정상적인 회원 인증 권한에서 사용

1. JWT는 유저가 로그인을 요청하면 서버에서 유저의 정보를 가지고
2. 정상적인 루트로 로그인을 요청한 유저인지 확인하고 토큰을 발급해서 전달해준다.(영화표)
3. 유저가 서버에 요청을 할때 JWT 토큰을 포함해서 요청을 하면 서버가 요청을 받았을때
4. 토큰의 검증을 하고 정상적인 회원이구나

### 목적
> 안정성 있게 정보를 전달해서 요청을 보낼수 있도록

### 해시화
> 해싱 기법을 적용해서 메시지의 위변조를 방지하기 위해 사용한다.

### JWT의 구조

```js
let header = {
    // 사용하는 해싱 알고리즘
    alg : "SHA256",
    // 토큰의 타입 내용
    type : "JWT"
}

let payload = { // 노출이 돼도 되는 정보만 담는다 !!
    // 토큰의 이름
    sub : "123",
    // 유저의 이름(유저 프로필)
    name : "soon",
    // 토큰 발급된 시간 발급된지 얼마나 지난 토큰인지?
    lat : "11111111" // ms로
}
exp : 해당 토큰의 만료시간
and : 토큰을 발급받을 대상
iss : 토큰 발급자

let signature = 해시화 sha256(base64url(header)) + base64url(payload);
```

### 서명
1. header : 타입과 알고리즘의 정보의 내용
2. payload : 유저의 정보와 만료기간이 포함된 내용
3, signature : header + payload를 인코딩해서 더한게 비밀키


```sh
# express
# view page폴더로
# ejs
# 깊은객체 false

npm i express jsonwebtoken dotenv ejs
```